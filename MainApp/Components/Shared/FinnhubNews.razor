@using MainApp.Components.ListGroup
@using MainApp.Components.Shared
@using MainApp.Components.Spinner

<SharedHeader Title="Latest news"
              Icon="bi-rss"
              IconColor="Theme.Danger" />

@if (_isLoading)
{
    <div class="d-flex justify-content-center align-items-center h-100">
        <Spinner Size="Size.Sm" />
        <span class="ps-1">
            Loading ...
        </span>
    </div>
}
else
{
    @if (_newsList.Success is true)
    {
        <ListGroup Styles="overflow-y-scroll app-feeds-news">
            @foreach (var record in _newsList.Data)
            {
                <ListGroupItemNews Image="@record.Image"
                                   Title="@record.Headline"
                                   Url="@record.Url"
                                   Summary="@record.Summary" />
            }
        </ListGroup>
        <div class="d-flex justify-content-end align-items-center">
            <small class="p-2">
                News provided by: <NavLink href="https://finnhub.io" class="text-decoration-underline" target="_blank">https://finnhub.io</NavLink>
            </small>
        </div>
    }
    else
    {
        <div class="d-flex flex-column justify-content-center align-items-center h-100">
            <div class="pb-5">
                <div class="d-flex flex-column text-center">
                    <i class="bi bi-wifi-off fs-2 text-@(Theme.Danger.ToString().ToLower())-emphasis"></i>
                    <small>
                        No feeds available!
                    </small>
                </div>
            </div>
            <div class="py-4">
                <button class="btn bg-info-subtle btn-sm text-info-emphasis border-info-subtle"
                        title="Refresh"
                        @onclick="RefreshNewsAsync">
                    Refresh
                </button>
            </div>
        </div>
    }
}
